(this["webpackJsonpcurrency-exchange"]=this["webpackJsonpcurrency-exchange"]||[]).push([[0],{26:function(e,n,t){e.exports=t(39)},37:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t.n(r),a=t(11),o=t.n(a),u=t(8),i=(t(36),t(37),t(7)),l=t(5),s=t(3),d=t(9),p=t.n(d),f={pockets:{EUR:{currency:"EUR",amount:"230"},USD:{currency:"USD",amount:"350"},GBP:{currency:"GBP",amount:"650"}},selectedCurrency:{source:"EUR",target:"GBP"},currentValue:{source:"",target:""}},g=function(e){return Math.floor(100*e)/100},h="exchange/CHANGE_AMOUNT",b="exchange/EXCHANGE_CURRENCY",v="exchange/CHANGE_CURRENCY_PAIR",m="exchange/SWAP_CURRENCY_PAIR";function y(e){var n=e.selectedCurrency,t=e.currentValue,r=e.pockets,c=n.source,a=t.source;return!a||parseFloat(a)>parseFloat(r[c].amount)}var x={},C="rate/SET_EXCHANGE_RATE";var E=Object(i.b)({exchange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case v:var t=n.origin,r=n.currency;return Object(s.a)({},e,{selectedCurrency:Object(s.a)({},e.selectedCurrency,Object(l.a)({},t,r)),currentValue:{source:"",target:""}});case m:return Object(s.a)({},e,{selectedCurrency:{source:e.selectedCurrency.target,target:e.selectedCurrency.source},currentValue:{source:e.currentValue.target,target:e.currentValue.source}});case h:var c,a=n.origin,o=n.amount,u=n.rate,i="source"===a?"target":"source";if(o<0)return e;var d=g(o),y="source"===a?p()(d).times(u):p()(d).div(u);return Object(s.a)({},e,{currentValue:(c={},Object(l.a)(c,a,o?p()(d).toString():o),Object(l.a)(c,i,o?g(y).toString():o),c)});case b:var x,C=e.selectedCurrency.source,E=e.currentValue.source,O=e.selectedCurrency.target,j=e.currentValue.target;return Object(s.a)({},e,{pockets:Object(s.a)({},e.pockets,(x={},Object(l.a)(x,C,Object(s.a)({},e.pockets[C],{amount:p()(e.pockets[C].amount).minus(E).toString()})),Object(l.a)(x,O,Object(s.a)({},e.pockets[O],{amount:p()(e.pockets[O].amount).add(j).toString()})),x)),currentValue:{source:"",target:""}});default:return e}},rate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case C:var t=n.rates;return Object(s.a)({},e,Object(l.a)({},t.base,t.rates));default:return e}}}),O=t(1),j=t(2);function w(){var e=Object(O.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n"]);return w=function(){return e},e}var k=j.a.div(w()),R="#f3f4f5",_="#8b959e",F="#0074eb",I="#eb008d";function V(){var e=Object(O.a)(["\n  max-width: 440px;\n  width: 100%;\n  height: 660px;\n  margin-top: 20px;\n  display: flex;\n  flex-direction: column;\n  border: 1px solid ",";\n  border-radius: 16px;\n  background-color: ",";\n  overflow: hidden;\n"]);return V=function(){return e},e}var N=j.a.div(V(),R,R),U=t(10),S=t.n(U),A=t(19),D=t(20),B=t(22),P=t(21),z=t(24),G=t(23),T=function(e,n){return S.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",fetch("".concat("https://api.exchangeratesapi.io/latest","?base=").concat(e,"&symbols=").concat(n.join(","))).then((function(e){return e.json()})));case 4:return t.prev=4,t.t0=t.catch(0),t.abrupt("return",{});case 7:case"end":return t.stop()}}),null,null,[[0,4]])};function X(){var e=Object(O.a)(["\n  font-size: 22px;\n  font-weight: 400;\n  margin-left: 10px;\n"]);return X=function(){return e},e}function H(){var e=Object(O.a)(["\n  border: 0;\n  background-color: transparent;\n  font-size: 28px;\n  cursor: pointer;\n"]);return H=function(){return e},e}function W(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0 12px;\n  background-color: #fff;\n"]);return W=function(){return e},e}var Y=j.a.div(W()),J=j.a.button(H()),L=j.a.h1(X()),M=function(){return c.a.createElement(Y,null,c.a.createElement(J,null,"\xd7"),c.a.createElement(L,null,"Exchange"))};function $(){var e=Object(O.a)(["\n  background-color: ",";\n  color: #fff;\n  font-size: 14px;\n  padding: 12px;\n  width: calc(100% - 36px);\n  margin: 0 18px 20px;\n  border: 0;\n  border-radius: 22px;\n  font-weight: 500;\n  font-size: 16px;\n  cursor: pointer;\n  box-shadow: 0px 4px 8px 2px #eb008d52;\n  transition: background-color 250ms ease-in-out;\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n\n    &:hover {\n      background-color: ",";\n    }\n  }\n  &:hover {\n    background-color: #cc097e;\n  }\n"]);return $=function(){return e},e}var q=j.a.button($(),I,I),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=navigator.language;return Intl.NumberFormat(n,Object(s.a)({style:"currency"},e)).format};function Q(){var e=Object(O.a)(["\n  color: ",";\n  background-color: #fff;\n  border: 2px solid ",";\n  padding: 4px 16px;\n  border-radius: 12px;\n  font-size: 14px;\n"]);return Q=function(){return e},e}var Z=j.a.div(Q(),F,R),ee=function(e){var n=e.selectedCurrency,t=e.targetRate,r=K({currency:n.source,minimumFractionDigits:0}),a=K({currency:n.target,maximumFractionDigits:4});return c.a.createElement(Z,null,r(1)," = ",t?a(t):"...")};function ne(){var e=Object(O.a)(["\n  width: 32px;\n  height: 32px;\n  background-color: #fff;\n  border: 2px solid ",";\n  font-size: 14px;\n  border-radius: 100%;\n  color: ",";\n  text-align: center;\n  cursor: pointer;\n"]);return ne=function(){return e},e}var te=j.a.button(ne(),R,F);function re(){var e=Object(O.a)(["\n  width: 100%;\n  border: 0;\n  font-size: 28px;\n  text-align: right;\n  background-color: transparent;\n  outline: none;\n\n  &::placeholder {\n    color: ",";\n  }\n"]);return re=function(){return e},e}function ce(){var e=Object(O.a)(["\n  color: ",";\n  font-size: 14px;\n  padding-top: 8px;\n  padding-left: 8px;\n"]);return ce=function(){return e},e}function ae(){var e=Object(O.a)(["\n  background-color: transparent;\n  border: 0;\n  font-size: 24px;\n  cursor: pointer;\n"]);return ae=function(){return e},e}function oe(){var e=Object(O.a)(["\n  min-width: 130px;\n"]);return oe=function(){return e},e}function ue(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 12px;\n  background-color: ",";\n  height: 120px;\n"]);return ue=function(){return e},e}var ie=j.a.div(ue(),(function(e){return{source:"#fff",target:R}[e.origin]})),le=j.a.div(oe()),se=j.a.select(ae()),de=j.a.div(ce(),(function(e){return e.lowBalance?"red":_})),pe=j.a.input(re(),_),fe=Object(u.b)((function(e,n){var t=e.exchange,r=e.rate,c=n.origin,a=t.selectedCurrency[c],o=parseFloat(t.currentValue[c])>parseFloat(t.pockets[a].amount),u="source"===c?t.selectedCurrency.target:t.selectedCurrency.source;return{supportedPockets:Object.keys(t.pockets),currency:a,balance:t.pockets[a].amount,ignoredCurrency:u,amount:t.currentValue[c],lowBalance:o,rate:r[t.selectedCurrency.source]&&r[t.selectedCurrency.source][t.selectedCurrency.target]}}),(function(e,n){return{onCurrencyChange:function(t){e(function(e,n){return{type:v,origin:e,currency:n}}(n.origin,t))},onAmountChange:function(t,r){e(function(e,n,t){return{type:h,origin:e,amount:n&&parseFloat(n),rate:t}}(n.origin,t,r))}}}))((function(e){var n=e.origin,t=e.currency,r=e.balance,a=e.amount,o=e.rate,u=e.lowBalance,i=e.supportedPockets,l=e.ignoredCurrency,s=e.onCurrencyChange,d=e.onAmountChange;return c.a.createElement(ie,{origin:n},c.a.createElement(le,null,c.a.createElement(se,{value:t,onChange:function(e){var n=e.target;return s(n.value)}},i.filter((function(e){return e!==l})).map((function(e){return c.a.createElement("option",{key:e},e)}))),c.a.createElement(de,{lowBalance:"source"===n&&u},"Balance: ",K({currency:t})(r))),c.a.createElement(pe,{type:"number",autoFocus:"source"===n,placeholder:"0",min:"0",value:"".concat(a),onChange:function(e){var n=e.target;return d(n.value,o)}}))}));function ge(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: -16px;\n  padding: 0 12px;\n"]);return ge=function(){return e},e}function he(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  flex-grow: 1;\n"]);return he=function(){return e},e}var be=j.a.div(he()),ve=j.a.div(ge()),me=function(e){function n(e){var t;return Object(A.a)(this,n),(t=Object(B.a)(this,Object(P.a)(n).call(this,e))).scheduleRateFetcher=function(e){var n=Object.keys(t.props.pockets).filter((function(n){return n!==e}));t.clearFetcherInstance(),t.updateRates(e,n),t.fetcherInstance=setInterval((function(){return t.updateRates(e,n)}),1e4)},t.updateRates=function(e,n){var r;return S.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,S.a.awrap(T(e,n));case 2:r=c.sent,t.props.setExchangeRate(r);case 4:case"end":return c.stop()}}))},t.handleVisibilityChange=function(e){e?t.scheduleRateFetcher(t.props.selectedCurrency.source):t.clearFetcherInstance()},t.clearFetcherInstance=function(){t.fetcherInstance&&(clearInterval(t.fetcherInstance),t.fetcherInstance=null)},t.scheduleRateFetcher(t.props.selectedCurrency.source),t}return Object(z.a)(n,e),Object(D.a)(n,[{key:"componentDidUpdate",value:function(e){e.selectedCurrency.source!==this.props.selectedCurrency.source&&this.scheduleRateFetcher(this.props.selectedCurrency.source)}},{key:"componentWillUnmount",value:function(){this.clearFetcherInstance()}},{key:"render",value:function(){var e=this.props,n=e.selectedCurrency,t=e.targetRate,r=e.exchangeDisabled,a=e.swapPockets,o=e.exchangeCurrency;return c.a.createElement(G.a,{onChange:this.handleVisibilityChange},c.a.createElement(c.a.Fragment,null,c.a.createElement(M,null),c.a.createElement(be,null,c.a.createElement("div",null,c.a.createElement(fe,{origin:"source"}),c.a.createElement(ve,null,c.a.createElement(te,{onClick:a},"\u21c5"),c.a.createElement(ee,{selectedCurrency:n,targetRate:t}),c.a.createElement("div",null)),c.a.createElement(fe,{origin:"target"})),c.a.createElement(q,{disabled:r,onClick:o},"Exchange"))))}}]),n}(c.a.Component),ye=Object(u.b)((function(e){var n=e.exchange,t=e.rate;return{pockets:n.pockets,targetRate:t[n.selectedCurrency.source]&&t[n.selectedCurrency.source][n.selectedCurrency.target],selectedCurrency:n.selectedCurrency,exchangeDisabled:y(n)}}),(function(e){return{exchangeCurrency:function(){e({type:b})},swapPockets:function(){e({type:m})},setExchangeRate:function(n){e(function(e){return{type:C,rates:e}}(n))}}}))(me),xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.c)(E,e,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())}({}),Ce=function(){return c.a.createElement(u.a,{store:xe},c.a.createElement(k,null,c.a.createElement(N,null,c.a.createElement(ye,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(Ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[26,1,2]]]);
//# sourceMappingURL=main.dd14cc92.chunk.js.map